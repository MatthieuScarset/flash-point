# strategy.yaml

# -----------------------------------------------------------------------------
# A central library of all possible block types. Game modes will pick from here.
# -----------------------------------------------------------------------------
block_library:
  stable_hex:
    label: 'stable_hex'
    shape: 'polygon'
    sides: 6
    radius: 18
    friction: 0.9
    restitution: 0.1
    render: { fillStyle: '#4A90E2' } # Blue
  volatile_hex:
    label: 'volatile_hex'
    shape: 'polygon'
    sides: 6
    radius: 18
    friction: 0.1
    restitution: 0.7
    render: { fillStyle: '#E94E77' } # Red
  heavy_square:
    label: 'heavy_square'
    shape: 'rectangle'
    width: 32
    height: 32
    mass: 10 # Heavier than default
    friction: 0.7
    restitution: 0.05
    render: { fillStyle: '#6D28D9' } # Purple

# -----------------------------------------------------------------------------
# Defines the initial state of the player's platform for a given game mode.
# If a game mode doesn't have a start condition, it will be empty.
# -----------------------------------------------------------------------------
start_conditions:
  default_start:
    - block_id: 'volatile_hex'
      position: { x: '50%', y: '60%' } # Use percentages (relative to scene width/height)
    - block_id: 'heavy_square'
      position: { x: '50%', y: '70%' }
    - block_id: 'stable_hex'
      position: { x: '50%', y: '80%' }
    - block_id: 'heavy_square'
      position: { x: '50%', y: '100%' }

# -----------------------------------------------------------------------------
# A list of all playable game modes.
# -----------------------------------------------------------------------------
game_modes:
  - id: 'stacker_challenge'
    name: 'Stacker Challenge'
    description: 'Build the tallest tower before time runs out!'
    start_condition: 'default_start'
    rules:
      session_duration: 20
      win_condition:
        type: 'max_height'
    spawner:
      base_rate: 1.5
      allowed_blocks: ['stable_hex', 'volatile_hex']

  - id: 'stability_test'
    name: 'Stability Test'
    description: 'Build a solid tower to survive a votality earthquake.'
    start_condition: null
    rules:
      - phase: 'build'
        duration: 120
      - phase: 'test'
        duration: 3
        # We can add phase-specific physics changes here in the future
        # physics_multiplier: { gravity: 1.5 }
    win_condition:
      type: 'stability' # Measures time without any blocks falling during the 'test' phase.
    spawner:
      base_rate: 1.0
      allowed_blocks: ['stable_hex', 'volatile_hex', 'heavy_square']

  - id: 'uniformity_check'
    name: 'Uniformity Check'
    description: 'Build a balanced tower to maximize your score.'
    start_condition: null
    rules:
      session_duration: 240
    win_condition:
      type: 'uniformity'
      # We want a 1:1 ratio of stable to volatile blocks
      target_balance: { stable_hex: 1, volatile_hex: 1 }
    spawner:
      base_rate: 2.0
      allowed_blocks: ['stable_hex', 'volatile_hex']

# -----------------------------------------------------------------------------
# The game mode to load when the app starts.
# -----------------------------------------------------------------------------
active_game_mode: 'stacker_challenge'